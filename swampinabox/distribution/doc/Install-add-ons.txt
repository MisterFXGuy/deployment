Installing Additional Components
--------------------------------


Installing Additional Assessment Platforms
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The SWAMP-in-a-Box installer includes only the Ubuntu 16.04 platform for
performing assessments. For performing assessments of C/C++ packages,
additional platforms are available, including various releases of CentOS,
Fedora, Scientific Linux, and older releases of Ubuntu. (Packages for other
languages will always be assessed on Ubuntu 16.04.)


==== Before You Begin ====

- You will need `root` access to the SWAMP-in-a-Box host.
- You will need `root` access to the SWAMP-in-a-Box database.


==== Procedure ====

1. Visit https://platform.swampinabox.org/platform-images/.

2. Download and copy to the SWAMP-in-a-Box host the `.qcow2.gz` files
   corresponding to the additional platforms you wish to perform assessments
   on. The naming scheme for these files is as follows:
+
----
condor-<Linux distribution>-<version>-<32 or 64 bit>-master-<YYYYMMDD>.qcow2.gz
----
+
When downloading the files, name the copies exactly as shown on
https://platform.swampinabox.org/. Otherwise, they will not be recognized as
supported platforms in the next step.

3. On the SWAMP-in-a-Box host, for each file, as `root` (or using `sudo`),
   run the `install_platform` script, providing the path to the `.qcow2.gz`
   file:
+
----
$ /opt/swamp/bin/install_platform <path to .qcow2.gz file>
----
+
When prompted, provide the database `root` password, which is needed to add
the platform to the database and make it available in the SWAMP. Note that
`install_platform` will likely take several minutes to complete due to the
size of the file.


Installing CodeSonar
~~~~~~~~~~~~~~~~~~~~

SWAMP-in-a-Box can be used with CodeSonar, a deep-path static analysis tool
provided by GrammaTech, Inc. CodeSonar finds cases of undefined behavior
(such as buffer overruns, null pointer dereferences, ...), API Misuse (use
after free, socket API, ...), as well as suspicious behavior (dead code,
unused variables, concurrency violations, taint, ...), and works on source
code and binaries.

Contact information for obtaining CodeSonar and licensing information for
CodeSonar can be found at:

  - sales@grammatech.com,
  - +1-888-695-2668, or
  - https://www.grammatech.com/products/codesonar.

CodeSonar is third party software created and maintained by GrammaTech, Inc.
Copyright 2017 GrammaTech, Inc. CodeSonar is a registered trademark of
GrammaTech, Inc. All rights reserved.


==== Before You Begin ====

- You will need `root` access to the SWAMP-in-a-Box host.

- You will need `root` access to the SWAMP-in-a-Box database.

- You will need to obtain one or both of the 32-bit and 64-bit Linux
  installers for CodeSonar from GrammaTech, Inc. The installer file(s)
  should be named:
+
----
codesonar-<version>.<YYYYMMDD>-i686-pc-linux.tar.gz    (32-bit)
codesonar-<version>.<YYYYMMDD>-x86_64-pc-linux.tar.gz  (64-bit)
----

- You will need the hostname and port for the license server to use with
  CodeSonar. (Contact GrammaTech, Inc. if you need help setting up and
  configuring a license server.) The SWAMP-in-a-Box host will need to be
  able to contact the license server in order to successfully perform
  assessments using CodeSonar; the scripts used below will not modify any
  relevant firewall configurations.

- You will need to know or decide how many simultaneous instances of
  CodeSonar the SWAMP may run.


==== Procedure ====

1. Run the `make_swamp_tool` script to package the CodeSonar installer(s)
   from GrammaTech, Inc. into the archive format that the SWAMP uses. (The
   sample command below and in the following steps are each written out over
   multiple lines for the sake of readability; everything should be entered
   on a single line, as a single command.)
+
----
$ /opt/swamp/bin/make_swamp_tool
      --tool-name gt-csonar
      --tool-version <version>
      --installer-linux32 <path to 32-bit installer>
      --installer-linux64 <path to 64-bit installer>
----
+
Omit the `--installer-linux32` option if you have only the 64-bit installer,
and similarly for the `--installer-linux64` option.
+
Note that `make_swamp_tool` will likely take several minutes to complete due
to the size of the CodeSonar installers. When it completes, the output
should look similar to the following and indicate that there is a file named
`gt-csonar-<version>.tar.gz` in the current working directory.
+
----
SWAMP tool archive: ./gt-csonar-4.4p0.tar.gz
Platform support:   32-bit 64-bit
----

2. As `root` (or using `sudo`), run the `install_codesonar` script with the
   `--add` option, providing the version of CodeSonar being installed and
   the path to the archive file produced in the previous step.
+
----
$ /opt/swamp/bin/install_codesonar
      --add
      --tool-version <version>
      --tool-archive <path to gt-csonar-<version>.tar.gz file>
----
+
Note that `install_codesonar` will likely take several minutes to complete due
to the size of the archive.

3. As `root` (or using `sudo`), run the `install_codesonar` script a second
   time, this time with the `--configure` option, providing the hostname and
   port of the license server, and the maximum number of simultaneous
   instances of CodeSonar that may run.
+
----
$ /opt/swamp/bin/install_codesonar
      --configure
      --license-server-host <hostname of the license server>
      --license-server-port <port number>
      --limit <max number of simultaneous instances of CodeSonar>
----


==== Managing the Installed Versions of CodeSonar ====

- Additional versions of CodeSonar can be installed using the directions
  above. In the SWAMP web application, the "latest" version of CodeSonar
  will be whichever version was *installed* most recently. We recommend
  installing multiple CodeSonar versions in order (e.g., 1.0, 2.0, 3.0,
  etc.) so that the "latest" version matches users' expectations.

- If you have previously installed, say, only the 32-bit version of
  CodeSonar 4.4p0, and now wish to make both the 32-bit and 64-bit version
  of CodeSonar 4.4p0 available in the SWAMP, first run the `make_swamp_tool`
  script, as above, to package the 32-bit and 64-bit CodeSonar installers
  together for the SWAMP. Then as `root` (or using `sudo`), run the
  `install_codesonar` script with the `--replace` option:
+
----
$ /opt/swamp/bin/install_codesonar
      --replace
      --tool-version <version>
      --tool-archive <path to gt-csonar-<version>.tar.gz file>
----

- If you wish to remove a version of CodeSonar from the SWAMP, as `root` (or
  using `sudo`), run the `install_codesonar` script with the `--remove`
  option, providing the version to remove.
+
----
$ /opt/swamp/bin/install_codesonar
      --remove
      --tool-version <version>
----


Installing Code Dx
~~~~~~~~~~~~~~~~~~

Through SWAMP's partnership with Code Dx, Inc., a SWAMP-specific version of
Code Dx software has been created to be solely used with SWAMP software.
Code Dx software shall not be redistributed with SWAMP software without
written consent of Code Dx, Inc.

To obtain a SWAMP version of Code Dx, contact Code Dx, Inc. at:

  - sales@codedx.com,
  - +1-631-759-3993, or
  - https://codedx.com/support/?v=7516fd43adaa.

After contacting Code Dx, Inc., you will be asked to agree to an End User's
License Agreement (EULA) with Code Dx, Inc. Once you have agreed to the
EULA, you will receive a download kit from Code Dx, Inc.

Code Dx is third party software created and maintained by Code Dx, Inc.
Copyright 2010-2017 Code Dx, Inc. All rights reserved.


==== Before You Begin ====

- You will need `root` access to the SWAMP-in-a-Box host.
- You will need `root` access to the SWAMP-in-a-Box database.
- You will need to obtain the `.war` file for Code Dx from Code Dx, Inc.


==== Procedure ====

1. Copy the Code Dx `.war` file obtained from Code Dx, Inc. to the
   SWAMP-in-a-Box host.

2. On the SWAMP-in-a-Box host, as `root` (or using `sudo`), run the
   `install_codedx` script, providing the path to the `.war` file:
+
----
$ /opt/swamp/bin/install_codedx <path to Code Dx .war file>
----
+
When prompted, provide the database `root` password, which is needed to add
the Code Dx to the database and make it available in the SWAMP.
